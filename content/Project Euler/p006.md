Title: Project Euler problem 6 - Sum square difference
Date: 2019-03-15 20:00
Category: Project Euler
Tags: project euler, python
related_posts: 
Slug: project-euler-problem-6
Authors: Søren
Summary: Solution to the sixth Project Euler problem. Finding the difference between the sum of the squares and the square of the sum of the first 100 natural numbers

[Link to problem on Project Euler homepage](https://projecteuler.net/problem=6)

[Link to Github repository](https://github.com/fractalleaf/project-euler/tree/master/p006)

## Description

The sum of the squares of the first ten natural numbers is,

$$1^2 + 2^2 + \ldots + 10^2 = 385$$

The square of the sum of the first ten natural numbers is,

$$(1 + 2 + \ldots + 10)^2 = 55^2 = 3025$$

Hence the difference between the sum of the squares of the first ten natural numbers and the square of the sum is $3025 − 385 = 2640$.

Find the difference between the sum of the squares of the first one hundred natural numbers and the square of the sum.

## Brute force
In the simplest brute force solution to the problem one simply iterates over all integers up to the limit, calculating the sum of singles and squares. 


```python
def p006(n):
    square_sum, single_sum = 0, 0
    for k in range(1, n+1):
        single_sum += k
        square_sum += k**2
    return single_sum**2 - square_sum

for LIMIT in [10, 100]:
    print("")
    print("limit = {}".format(LIMIT))
    print("Sum square difference: {}".format(p006(LIMIT)))
    %timeit p006(LIMIT)
```

    
    limit = 10
    Sum square difference: 2640
    3.31 µs ± 24.7 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)
    
    limit = 100
    Sum square difference: 25164150
    30.7 µs ± 562 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)


## Optimisation

The brute force approach can be improved upon by using the fact that both the [sum](https://en.wikipedia.org/wiki/Triangular_number) and the [sum of squares](https://en.wikipedia.org/wiki/Square_pyramidal_number) of the first $n$ natural numbers have closed form solutions given as

$$
\begin{eqnarray}
\sum_{k=1}^n k   &=& \frac{n(n+1)}{2} \\
\sum_{k=1}^n k^2 &=& \frac{n(n+1)(2n + 1)}{6}. \\
\end{eqnarray}
$$

The difference can then be written as

$$\left( \sum_{k=1}^n k \right)^2 - \sum_{k=1}^n k^2 = \frac{n^4}{4} + \frac{n^3}{6} - \frac{n^2}{4} - \frac{n}{6}$$


```python
def p006(n):
    return int(n**4/4 + n**3/6 - n**2/4 - n/6)

for LIMIT in [10, 100]:
    print("")
    print("limit = {}".format(LIMIT))
    print("Sum square difference: {}".format(p006(LIMIT)))
    %timeit p006(LIMIT)
```

    
    limit = 10
    Sum square difference: 2640
    990 ns ± 3.75 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)
    
    limit = 100
    Sum square difference: 25164150
    1.08 µs ± 31.5 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)


For the 100 limit the runtime is improved by a factor 30.
